# pigz Benchmark - Ordered Channels Validation
# Date: 2026-02-03
# Purpose: Validate ordered channels pattern (manual lowering)
# Config: 50MB input, 8 workers, 5 runs, CC_WORKERS=16

=== Pattern Changes ===
- Replaced void* task wrapper with OrderedCompressCaptures struct
- __result at offset 0 preserves Result type (error info retained)
- malloc/free for captures struct (compiler would optimize)

=== Benchmark Summary (avg over 5 runs) ===
Implementation               Comp(s)    Comp(MB/s)       Ratio   Decomp(s)  Decomp(MB/s)
pigz (pthread)                 0.283         168.3       37.9%       0.089         537.0
pigz_cc (Concurrent-C)         0.322         147.9       37.9%       0.085         563.6

=== Comparison to Baseline ===
Baseline (before ordered channels):
  Compression: 146.1 MB/s
  Decompression: 644.4 MB/s

Ordered channels pattern:
  Compression: 147.9 MB/s (+1% - within noise)
  Decompression: 563.6 MB/s (-13% - malloc overhead)

=== Validation Results ===
- Correctness: PASS
- Error type preservation: PASS (CCIoError propagates through channel)
- FIFO ordering: PASS (results arrive in spawn order)
- Design validated for compiler implementation
