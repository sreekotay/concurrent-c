/*
 * Test header for CCRes macro usage in .cch files.
 * Uses CCRes(T, E) which expands to:
 *   - __CCResultGeneric in parser mode
 *   - CCResult_T_E in real compilation
 */
#ifndef CC_IO_TEST_H
#define CC_IO_TEST_H

#include <ccc/cc_io_error.cch>
#include <ccc/cc_optional.cch>

/* Test function using CCRes(T, E) macro */
static inline CCRes(bool, CCIoError) cc_io_test_func(void) {
    return CCRes_ok(bool, CCIoError, true);
}

/* Test with CCRes(int, CCError) */
static inline CCRes(int, CCError) cc_io_test_int(int x) {
    if (x < 0) {
        return CCRes_err(int, CCError, cc_error(CC_ERR_INVALID_ARG, "negative"));
    }
    return CCRes_ok(int, CCError, x * 2);
}

/* Test with CCOpt(int) */
static inline CCOpt(int) cc_io_test_opt(bool has_value) {
    if (has_value) {
        return CCOpt_some(int, 42);
    }
    return CCOpt_none(int);
}

#endif /* CC_IO_TEST_H */
