// Smoke: returning a move-only slice works when explicitly moved.
#include "cc_runtime.cch"

CCSlice make_ok(void) {
    int* p0 = (int*)malloc(sizeof(int) * 2);
    p0[0] = 7; p0[1] = 8;
    CCSlice s = cc_slice_from_parts(p0, 2, cc_slice_make_id(2, true, false, false), 2);
    return cc_move(s);
}

int main(void) {
    CCSlice t = make_ok();
    int* p = (int*)t.ptr;
    return (p && p[0] == 7) ? 0 : 1;
}

