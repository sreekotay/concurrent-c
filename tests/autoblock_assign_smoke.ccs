#include <ccc/cc_runtime.cch>
#include <ccc/cc_closure.cch>
#include <stdint.h>
#include <ccc/std/task.cch>

static int add1(int x) { return x + 1; }

@async int f(int x) {
    int y = 0;
    y = add1(x);
    return y;
}

int main(void) {
    intptr_t r = cc_block_on_intptr(f(1));
    return (r == 2) ? 0 : 1;
}

