mutation of shared reference 'counter' in closure
