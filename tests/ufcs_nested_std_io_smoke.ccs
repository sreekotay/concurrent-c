/* Test nested UFCS in std_out.write() with multiple String variables.
   This tests that s.as_slice() inside std_out.write() is correctly rewritten
   even when there are multiple String variables in the same scope. */
#define CC_ENABLE_SHORT_NAMES
#include <ccc/std/prelude.cch>

int main(void) {
    @arena {
        // First string - simple case
        String s1 = string_new(arena);
        s1.append("first:");
        std_out.write(s1);
        
        // Second string - nested UFCS case
        String s2 = string_new(arena);
        s2.append("second:");
        std_out.write(
            s2.as_slice()
        );
        
        // Third string - single line nested UFCS
        String s3 = string_new(arena);
        s3.append("third\n");
        std_out.write(s3.as_slice());
    }
    return 0;
}
