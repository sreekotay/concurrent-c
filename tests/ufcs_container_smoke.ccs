/* Test UFCS method calls on generic containers */
#include <ccc/std/prelude.cch>
#include <stdio.h>

int main(void) {
    CCArena arena = cc_heap_arena(kilobytes(4));
    
    Vec<int> v = vec_new<int>(&arena);
    
    /* UFCS method calls - v.method(args) -> Vec_int_method(&v, args) */
    v.push(10);
    v.push(20);
    v.push(30);
    
    CCOptional_int val = v.get(1);
    if (!val.has || val.u.value != 20) {
        printf("FAIL: get(1) expected 20\n");
        return 1;
    }
    
    CCOptional_int popped = v.pop();
    if (!popped.has || popped.u.value != 30) {
        printf("FAIL: pop() expected 30\n");
        return 1;
    }
    
    printf("ok\n");
    cc_heap_arena_free(&arena);
    return 0;
}
